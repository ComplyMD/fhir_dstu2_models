<%== '<?xml version="1.0" encoding="UTF-8"?>' if is_root %>
<% local_name = name || 'Extension' %>
<<%= (is_lowercase) ? local_name.downcase : local_name %>
<%if model.xmlId%> id="<%= model.xmlId%>"<%end%>
<%- if !model.url().nil? -%>url="<%== model.url() %>"<%- end -%>
<%== (is_root) ? ' xmlns="http://hl7.org/fhir"' : ''%>>
    <%== render :template => 'element', :locals => {model: model, is_resource: false} %>
    <%- if !model.value().nil? -%><%- if FHIR::AnyType::PRIMITIVES.include? model.valueType().downcase -%><%- if model.value().is_a?(Hash) -%><value<%= model.valueType() %> value="<%= model.value()[:value] %>"/><%- else -%><value<%= model.valueType() %> value="<%= model.value() %>"/><%- end -%><%- elsif FHIR::AnyType::DATE_TIMES.include? model.valueType().downcase -%><%- if model.value().is_a?(Hash) -%><value<%= model.valueType() %> value="<%= model.value()[:value] %>"/><%- else -%><value<%= model.valueType() %> value="<%= model.value() %>"/><%- end -%><%- else -%><%- if model.value().is_a?(Hash) -%><%== model.value()[:value].to_xml(is_root: false, name: "value#{model.valueType()}")%><%- else -%><%== model.value().to_xml(is_root: false, name: "value#{model.valueType()}")%><%- end -%><%- end -%><%- end -%>
</<%= (is_lowercase) ? local_name.downcase : local_name %>>
